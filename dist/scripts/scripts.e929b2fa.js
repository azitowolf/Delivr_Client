"use strict";angular.module("clientApp",["ngAnimate","ngCookies","ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"mainCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"loginCtrl"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"registerCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"aboutCtrl"}).when("/user",{templateUrl:"views/user.html",controller:"UserCtrl",controllerAs:"userCtrl"}).when("/userNewDelivery",{templateUrl:"views/userNewDelivery.html",controller:"UserCtrl",controllerAs:"userCtrl"}).when("/userViewDeliveries",{templateUrl:"views/userViewDeliveries.html",controller:"UserCtrl",controllerAs:"userCtrl"}).when("/userAddCard",{templateUrl:"views/userAddCard.html",controller:"UserCtrl",controllerAs:"userCtrl"}).otherwise({redirectTo:"/"})}]).config(["$httpProvider",function(a){a.defaults.withCredentials=!0,a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]).run(["authFactory",function(a){a.confirmLogin()}]),function(a){var b=function(a){};b.$inject=["$rootScope"],angular.module("clientApp").controller("MainCtrl",b)}(angular),function(a){var b=function(a,b,c,d,e){this.loginForm={},this.loginForm.username="",this.loginForm.password="",this.login=e.login};b.$inject=["$http","$routeParams","$location","$rootScope","authFactory"],a.module("clientApp").controller("LoginCtrl",b)}(angular),function(a){var b=function(a,b,c){this.registerForm={},this.registerForm.username="",this.registerForm.password="",this.registerForm.firstName="",this.registerForm.lastName="",this.registerForm.phoneNumber="",this.registerForm.stripeID="",this.register=c.register};b.$inject=["$http","$routeParams","authFactory"],angular.module("clientApp").controller("RegisterCtrl",b)}(angular),function(a){var b=function(a,b){this.logout=b.logout,this.isActive=function(b){return b===a.path()}};b.$inject=["$location","authFactory"],angular.module("clientApp").controller("NavbarCtrl",b)}(angular),function(a){var b=function(a,b,c,d){this.createDeliveryForm={},this.createDeliveryForm.description="",this.createDeliveryForm.status="created",this.createDeliveryForm.price=0,this.createDeliveryForm.deliveryTime="",this.createDeliveryForm.locationA={},this.createDeliveryForm.locationA.street="",this.createDeliveryForm.locationA.city="",this.createDeliveryForm.locationA.state="",this.createDeliveryForm.locationA.zipCode="",this.createDeliveryForm.locationB={},this.createDeliveryForm.locationB.street="",this.createDeliveryForm.locationB.city="",this.createDeliveryForm.locationB.state="",this.createDeliveryForm.locationB.zipCode="",this.cardForm={},this.cardForm.number="",this.cardForm.cvc="",this.cardForm.exp_month=void 0,this.cardForm.exp_year=void 0,this.currentUser=a.currentUser,this.postDelivery=b.addDelivery,this.getDeliveries=b.index,this.deliveries=b.deliveries,this.getPostmatesProposal=c.getProposal,this.currentProposal=c.currentProposal,this.createStripeUserToken=d.createUserToken,this.createStripeUser=d.createUser};b.$inject=["authFactory","deliveriesFactory","postmatesFactory","stripeFactory"],angular.module("clientApp").controller("UserCtrl",b)}(angular),function(){var a=function(a,b,c){var d={};return d.currentUser={},d.confirmLogin=function(){var c="http://localhost:3000/auth/login";a.get(c).success(function(a){d.currentUser=a.user,b.currentUser=a.user}).error(function(a,b){console.error(a),console.error(b)})},d.logout=function(){var e="http://localhost:3000/auth/logout";a.get(e).success(function(a){d.currentUser=a.user,b.currentUser=void 0,c.path("/main")}).error(function(a,b){console.error(a),console.error(b)})},d.login=function(e){a.post("http://localhost:3000/auth/login",e).success(function(a){d.currentUser=a.user,b.currentUser=a.user,c.path("/user")}).error(function(a,b){console.error(a),console.error(b)})},d.register=function(e){a.post("http://localhost:3000/auth/register",e).success(function(a){d.currentUser=a.user,b.currentUser=a.user,c.path("/user")}).error(function(a,b){console.error(a),console.error(b)})},d};a.$inject=["$http","$rootScope","$location"],angular.module("clientApp").factory("authFactory",a)}(),function(a){var b=function(a,b,c,d){var e={};return e.addDelivery=function(b){var c=d.currentUser._id,e="http://localhost:3000/users/api/"+c;a.put(e,b).success(function(a){d.confirmLogin()}).error(function(a,b){console.error(a),console.error(b)})},e.find=function(d){a.get("http://localhost:3000/deliveries/api/"+d).success(function(a){b.currentUser=a.user,b.currentUserName=a.user.username,c.path("/user")}).error(function(a,b){console.log(a),console.log(b)})},e};b.$inject=["$http","$rootScope","$location","authFactory"],a.module("clientApp").factory("deliveriesFactory",b)}(angular),function(a){var b=function(a,b,c,d,e){var f={};return f.getProposal=function(c){var d="http://localhost:3000/postmates/getProposal",f=c,g=f.locationA,h=f.locationB,i={userid:e.currentUser._id,deliveryid:f._id,pickup:g.street+", "+g.city+", "+g.state+" "+g.zipCode,dropoff:h.street+", "+h.city+", "+h.state+" "+h.zipCode};a.put(d,i).success(function(a){console.log(a),b.currentProposal=a}).error(function(a){console.log(a)})},f};b.$inject=["$http","$rootScope","$location","$httpParamSerializer","authFactory","deliveriesFactory"],a.module("clientApp").factory("postmatesFactory",b)}(angular),function(){var a=function(a,b){var c={};return c.createUser=function(c){var d="http://localhost:3000/stripe/createUser",e={token:c};a.post(d,e).success(function(a){console.log(a),b.currentUserStripeToken=a}).error(function(a,b){console.log(a),console.log(b)})},c.createUserToken=function(b){var d="http://localhost:3000/stripe/createUserToken",e=b;a.post(d,e).success(function(a){c.createUser(a.id)}).error(function(a,b){b&&console.log(b),console.log(a)})},c};a.$inject=["$http","$rootScope","$location"],angular.module("clientApp").factory("stripeFactory",a)}();